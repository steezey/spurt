# Generated by CoffeeScript 1.6.3
toMixin = 
    isEmpty: (thing) -> thing.length is 0

    isntEmpty: (thing) -> thing.length isnt 0

    method: (thing, name) ->
        () -> thing[name].apply(thing, arguments)

    protract: (obj, name, names...) ->
        if name is undefined
            obj
        else if obj is undefined
            undefined
        else
            _.protract.apply({}, [obj[name]].concat(names))

    streamToString: (stream, callback) ->
        input = undefined
        input = ""
        stream.on "data", (chunk) ->
            input += chunk.toString()

        stream.on "end", ->
            callback input

    stringRepeat: (n, str) ->
        if n < 1
            ''
        else
            str + arguments.callee(n - 1, str)

    createCheckin: (n, cb) -> ->
        if --n <= 0
            cb()

    numberToEnglish: (n, item) ->
        if item is undefined
            ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten'][n - 1]
        else
            switch n
                when 0
                    "no #{item}s"
                when 1
                    "one #{item}"
                else
                    "#{_.numberToEnglish(n)} #{item}s"

    englishList: (xs) ->
        switch xs.length
            when 1, 0
                xs.join('')
            when 2
                xs[0] + " and " + xs[1]
            else
                xs[0...-1].join(', ') + ", and " + xs[xs.length - 1]

    segment: (xs, n, includeTail = false) ->
        result = []
        while n <= xs.length
            result.push(xs[0...n])
            xs = xs[n..]

        if true is includeTail and 0 < xs.length
            result.push(xs)

        result


if _?
    _.mixin(toMixin)
else if module? and process? #we're in node
    _ = require('underscore')
    _.mixin(toMixin)
    module.exports = _
else
    console.error("Customscore: You need to include underscore as well! Try this:\nhttp://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js")    
